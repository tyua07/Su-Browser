<?xml version="1.0" encoding="utf-8"?>
<rss version="2.0" xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:content="http://purl.org/rss/1.0/modules/content/">
    <channel>
        <title>Su Browser Blog</title>
        <link>http://subrowser.com/blog</link>
        <description>Su Browser Blog</description>
        <lastBuildDate>Fri, 09 Jun 2023 00:00:00 GMT</lastBuildDate>
        <docs>https://validator.w3.org/feed/docs/rss2.html</docs>
        <generator>https://github.com/jpmonette/feed</generator>
        <language>en</language>
        <item>
            <title><![CDATA[原子匹配]]></title>
            <link>http://subrowser.com/blog/document-match</link>
            <guid>http://subrowser.com/blog/document-match</guid>
            <pubDate>Fri, 09 Jun 2023 00:00:00 GMT</pubDate>
            <description><![CDATA[原子匹配是一个很强大的功能，它可以节约您的测试时间，方便您进行各种场景下的网页测试。 接下来我们使用一个完整的场景来说明这个东西应该去怎么样使用。]]></description>
            <content:encoded><![CDATA[<p>原子匹配是一个很强大的功能，它可以节约您的测试时间，方便您进行各种场景下的网页测试。 接下来我们使用一个完整的场景来说明这个东西应该去怎么样使用。</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="示例">示例<a href="#示例" class="hash-link" aria-label="Direct link to 示例" title="Direct link to 示例">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="示例一">示例一<a href="#示例一" class="hash-link" aria-label="Direct link to 示例一" title="Direct link to 示例一">​</a></h3><p>例如我们要测试网页服务，这个服务在本地修改了，但是并未上传到正式环境。如果我们网站中有一段 js 代码是判断了必须是在正式环境的域名下才能使用。这个时候我们使用原子匹配就能实现。</p><p>假设我们本地的 URL <a href="http://demo.dev/index.html" target="_blank" rel="noopener noreferrer">http://demo.dev/index.html</a> ，正式网站的 URL 是 <a href="http://production.com/index.html" target="_blank" rel="noopener noreferrer">http://production.com/index.html</a> ，这个时候我们只需要通过原子属性，把当前打开的浏览器 JS 环境强制变成 <a href="http://production.com/index.html%EF%BC%8C" target="_blank" rel="noopener noreferrer">http://production.com/index.html，</a>
虽然实际网站的还是 <a href="http://demo.dev/index.html" target="_blank" rel="noopener noreferrer">http://demo.dev/index.html</a> ，但是相当于了骗过 JS，通过底层方式构建了一个和正式环境一样的 JS Runtime。</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="示例代码">示例代码<a href="#示例代码" class="hash-link" aria-label="Direct link to 示例代码" title="Direct link to 示例代码">​</a></h4><div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">match</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> DocumetMatch</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">set_match_type</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">MatchType</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">FULL</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">set_target_url</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"http://demo.dev/index.html"</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">set_current_url</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"http://production.com/index.html"</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">document</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">append_match_list</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">match</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="示例二">示例二<a href="#示例二" class="hash-link" aria-label="Direct link to 示例二" title="Direct link to 示例二">​</a></h3><p>假设我们的测试用例需要完成一个从 A 页面到 B 页面的测试，但是这个 A 和 B 页面都还在本地。这个时候我们可以用原子匹配来实现该功能。</p><p>假设我们本地的 URL <a href="http://localhost.com" target="_blank" rel="noopener noreferrer">http://localhost.com</a> ，A页面的 URL 是 <a href="http://a.com" target="_blank" rel="noopener noreferrer">http://a.com</a> ，B 页面的 URL 是 <a href="http://b.com" target="_blank" rel="noopener noreferrer">http://b.com</a> 。我们可以通过和上面一样的方式构造和正式环境一样的 JS Runtime。</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="示例代码-1">示例代码<a href="#示例代码-1" class="hash-link" aria-label="Direct link to 示例代码" title="Direct link to 示例代码">​</a></h4><div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">match</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> DocumetMatch</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">set_match_type</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">MatchType</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">FULL</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">set_target_url</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"http://localhost.com"</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">set_document_referrer</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"https://a.com"</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">set_current_url</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"http://b.com"</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">document</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">append_match_list</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">match</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="匹配模式">匹配模式<a href="#匹配模式" class="hash-link" aria-label="Direct link to 匹配模式" title="Direct link to 匹配模式">​</a></h2><p>我们提供多种的 URL 匹配模式，方便您解决各种复杂的 URL 匹配</p><ul><li>FULL，全局匹配，链接必须要和设置的保持一致。</li><li>RE，正则匹配，通过正则表达式匹配。</li><li>PATH，只匹配 PATH 路径部分。</li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="document-原子匹配参数">Document 原子匹配参数<a href="#document-原子匹配参数" class="hash-link" aria-label="Direct link to Document 原子匹配参数" title="Direct link to Document 原子匹配参数">​</a></h2><table><thead><tr><th>属性名称</th><th>描述</th></tr></thead><tbody><tr><td>target_url</td><td>当前链接</td></tr><tr><td>match_type</td><td>匹配模式</td></tr><tr><td>match_break</td><td>如果匹配到结果是否还继续匹配</td></tr><tr><td>current_url</td><td>需要强制设置的 URL</td></tr><tr><td>document_referrer</td><td>需要强制设置的 document 里的 来源 URL</td></tr><tr><td>header_referrer</td><td>需要强制设置的 header 里的 来源 URL</td></tr><tr><td>title</td><td>需要强制设置的网站标题</td></tr></tbody></table><blockquote><p>详细使用方式请看 <a href="https://github.com/tyua07/FP-Browser-Windows-Test/blob/master/testcase/test_document_target_match_json.py" target="_blank" rel="noopener noreferrer">测试用例</a></p></blockquote><h2 class="anchor anchorWithStickyNavbar_LWe7" id="更多">更多<a href="#更多" class="hash-link" aria-label="Direct link to 更多" title="Direct link to 更多">​</a></h2><p>其实我们还有更多类型的原子匹配，这篇文章只是单纯介绍了 Document 场景下的原子匹配，如果您有其他需求，还原联系我。</p>]]></content:encoded>
            <category>原子匹配</category>
            <category>document</category>
        </item>
    </channel>
</rss>